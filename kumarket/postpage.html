<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post Page</title>
    <link rel="stylesheet" href="postpage.css">
</head>

<body>
    <header>
        <nav>
            <div class="nav-bar">
                <div class="nav-container">
                    <img class="nav-logo" src="https://kuma.io/assets/images/social/og-image-1200-630.jpg?cb=1730815037"
                        alt="Logo" height="65" width="125px">
                    <ul class="nav-list">
                        <!-- Replace with the actual image URL -->
                        <li class="nav-items">Home</li>
                        <li class="nav-items">Products</li>
                        <li class="nav-items">About</li>
                        <li class="nav-items">Contact</li>
                        <li class="nav-items">Account</li>

                    </ul>
                    <img class="cart"
                        src="https://png.pngtree.com/element_our/20190531/ourmid/pngtree-shopping-cart-convenient-icon-image_1287807.jpg"
                        alt="cart" height="50" width="50">
                </div>
            </div>
        </nav>
    </header>
    <main>

        <form action="" name="addProductform" onsubmit="return Validate()" method="POST">

            <div class="product_info" id="name_div">
                <!-- name of the product server-side-name = "product_name", a required field-->
                <label for="product_name" class="style-label">Name of the Product:</label>
                <input type="text" class="style-input" id="product_name" name="product_name" required>
            </div>
            <div class="product_info">
                <!-- this is for product category, server-side-name = "product_category" -->
                <label for="product_category" class="style-label">Category:</label>
                <select name="categories" class="style-input" id="product_category" required>
                    <option>Home Appliances</option>
                    <option>Groceries</option>
                    <option>Men's Clothing</option>
                    <option>Women's Clothing</option>
                    <option>Toddler's Clothing</option>
                    <option>Electrical Devices</option>
                    <option>Riding Essentials</option>
                    <option>Baby Care Essentials</option>
                    <option>Sports & Outdoor</option>
                    <option>Accessories</option>
                    <option>Pet Essentials</option>
                </select>
            </div>
            <div class="product_info" id="variant_div">
                <!-- this is to add different variants of product, at least one is required. -->
                <label for="add_button">Variant:</label>
                <div class="note">*Note: This is the only way to add your images so, please add at least one variant of
                    your product.</div>
                <div class="formerror"></div>
                <!-- "addMore": function to create additional input fields, implementation in script tag. -->
                <button id="add_button" type="button" onclick="addMore()">Add</button>
            </div>
            <div class="product_info">
                <!-- this is for product details, server-side-name = "product_details", required field -->
                <label for="pr_details" class="style-label">Please provide your product details:</label>
                <textarea name="product_details" class="style-input" id="pr_details" rows="20" cols="50"
                    required></textarea>
                <div class="note">*Note: Enter your product name, brand, brief description of your product(dimensions,
                    colors, size, uses, material, warranty, etc.), how to use, matters of attention and so on.</div>
            </div>
            <div class="product_info" id="tag_div">
                <!-- this is for tags to enhance search implementation, server-side-name = "product_tags" -->
                <label for="tags" class="style-label">Tags:</label>
                <textarea name="product_tags" class="style-input" id="tags" rows="10" cols="50"></textarea>
                <div class="formerror"></div>
                <!-- note to the user to follow the instructions when creating tags. -->
                <div class="note">*Note: Enter tags related to your product like color, model, brand name, etc. <br>
                    Please follow the following instructions when entering tags:
                    <ol type="1">
                        <li>Enter the sign '#' before your tag names.</li>
                        <li>Do not leave any space between the sign and your tag names.</li>
                        <li>Enter as many tags as possible related to your products like your color, model name, brand
                            name material, etc. This will increase your product visibility in the search content.</li>
                        <li>Please leave a space before entering another tag.</li>
                        <li>If there are multiple names in a single tag, separate them with the underscore sign '_'.
                        </li>
                        <li>Here are some examples of how your tag should look. <i>#color #brand_name #model_name,
                                etc.</i></li>
                    </ol>
                </div>
            </div>
            <div class="product_info" id="price_div">
                <!-- this is for price of the product, server-side-name = "pr_price", a required field -->
                <label for="price" class="style-label">Enter the Product Price:</label>
                <input type="text" name="pr_price" class="style-input" id="price" required>
                <span class="formerror"></span>
            </div>
            <div class="product_info" id="stock">
                <!-- stock number, need to update itself afte the product decreases, server-side-name = "stock" -->
                <label for="stock">Stock:</label>
                <input type="number" class="style-input" id="stock" name="stock"
                    placeholder="Enter the number of products in your stock" required>
                <div class="formerror"></div>
            </div>

            <!-- button to submit the form or to add product to the search page. -->
            <button onclick="">Product</button>
        </form>
    </main>
</body>

<!-- JS implementation -->
<script>
    var counter = 1; // Counter to keep track of the number of repeated elements

    // Definition of function to add more input fields
    function addMore() {
        // Create a new HTML element (e.g., an input field)
        var newElement = document.createElement('div');

        // Set attribute id = variant + counter
        newElement.setAttribute('id', 'variant' + counter);

        // Set the innerHTML of the new element
        newElement.innerHTML = `
            <input type="text" class="style-input variantColor" name="variant_color/size${counter}" id="variant_details${counter}" placeholder="Color/Size of the product">
            <input type="file" class="style-input" name="variant_img${counter}" id="vairant_details${counter}">
            <button type="button" onclick="remove(${counter})">Remove</button>
            <br>
        `;
        // Button to remove the redundant input fields for "Variant", needs counter as argument to identify that particular element that needs to be removed.

        // Append the new element to the container
        var container = document.getElementById('variant_div');
        container.appendChild(newElement);

        // Increment the counter for the next element
        counter++;
    }

    // Definition of function to remove to input fields
    function remove(counter) {
        // Stores element whose id is variant + counter (value passed as an argument) 
        var elementToremove = document.getElementById('variant' + counter);
        // Implementation of JS function 'remove()' to remove the entire element from DOM.
        elementToremove.remove();
    }

    function seterror(id, error) {
        // Find the element by id and set the error message
        var element = document.getElementById(id); // Corrected: added document
        element.getElementsByClassName('formerror')[0].innerHTML = error;
    }

    function Validate() {
        var returnVal = true;

        // Get the value of the price input field
        var priceCheck = document.forms['addProductform']["pr_price"].value;
        console.log(priceCheck);

        // Check if the input is not a number or if it is empty
        if (isNaN(priceCheck) || priceCheck.trim() === "" || parseFloat(priceCheck) <= 0) {
            seterror("price_div", "*Price input is invalid. Please enter a valid numeric value.");
            returnVal = false;
        }

        return returnVal;

    }
</script>

</html>